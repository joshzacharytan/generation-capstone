<!DOCTYPE html>
<html>
<head>
    <title>API Detection Test</title>
</head>
<body>
    <h1>API Base URL Detection Test</h1>
    <div id="results"></div>
    
    <script>
        // Simulate the same logic as in api.js
        const getApiBaseUrl = () => {
            // In development, use localhost
            if (process.env.NODE_ENV === 'development') {
                console.log('API Base URL: Development mode, using localhost');
                return 'http://localhost:8000';
            }
            
            // In production, construct the API URL based on the current domain
            if (typeof window !== 'undefined') {
                const hostname = window.location.hostname;
                console.log('API Base URL: Production mode, hostname:', hostname);
                
                // For your specific setup: frontend is gensg.tanfamily.cc, API is gensg-fastapi.tanfamily.cc
                if (hostname === 'gensg.tanfamily.cc') {
                    console.log('API Base URL: Using gensg-fastapi.tanfamily.cc');
                    return 'https://gensg-fastapi.tanfamily.cc';
                }
            }
            
            // Fallback for any other case
            console.log('API Base URL: Fallback to localhost');
            return 'http://localhost:8000';
        };

        const results = document.getElementById('results');
        const hostname = window.location.hostname;
        const nodeEnv = typeof process !== 'undefined' && process.env ? process.env.NODE_ENV : 'undefined';
        const apiUrl = getApiBaseUrl();
        
        results.innerHTML = `
            <p><strong>Current hostname:</strong> ${hostname}</p>
            <p><strong>NODE_ENV:</strong> ${nodeEnv}</p>
            <p><strong>Detected API URL:</strong> ${apiUrl}</p>
            <p><strong>Expected for gensg.tanfamily.cc:</strong> https://gensg-fastapi.tanfamily.cc</p>
        `;
        
        console.log('Hostname:', hostname);
        console.log('NODE_ENV:', nodeEnv);
        console.log('API URL:', apiUrl);
    </script>
</body>
</html>